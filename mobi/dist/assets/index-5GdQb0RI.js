import{r as l,a as M,L as N,u as C,S as O,R as f,b as E}from"./vendor-CUghpWbs.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();var L={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=l,W=Symbol.for("react.element"),I=Symbol.for("react.fragment"),P=Object.prototype.hasOwnProperty,A=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function z(o,r,i){var s,t={},n=null,d=null;i!==void 0&&(n=""+i),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(d=r.ref);for(s in r)P.call(r,s)&&!_.hasOwnProperty(s)&&(t[s]=r[s]);if(o&&o.defaultProps)for(s in r=o.defaultProps,r)t[s]===void 0&&(t[s]=r[s]);return{$$typeof:W,type:o,key:n,ref:d,props:t,_owner:A.current}}j.Fragment=I;j.jsx=z;j.jsxs=z;L.exports=j;var e=L.exports,v={},w=M;v.createRoot=w.createRoot,v.hydrateRoot=w.hydrateRoot;function D({onLogin:o}){const[r,i]=l.useState(""),[s,t]=l.useState(""),[n,d]=l.useState(""),[m,c]=l.useState(!1),a=async h=>{h.preventDefault(),d(""),c(!0);try{const x=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:s})});if(x.ok){const u=await x.json();o(u.user)}else{const u=await x.json();d(u.error||"Ошибка входа")}}catch{d("Ошибка подключения к серверу")}finally{c(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"400px",background:"white"},children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,color:"#2563eb",marginBottom:"0.5rem"},children:"УправДок"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Мобильное приложение"})]}),e.jsxs("form",{onSubmit:a,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:"Логин"}),e.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),placeholder:"Введите логин",required:!0,autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:"Пароль"}),e.jsx("input",{type:"password",value:s,onChange:h=>t(h.target.value),placeholder:"Введите пароль",required:!0,autoComplete:"current-password"})]}),n&&e.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",fontSize:"0.875rem"},children:n}),e.jsx("button",{type:"submit",disabled:m,style:{width:"100%",marginTop:"0.5rem"},children:m?"Вход...":"Войти"}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f3f4f6",borderRadius:"8px",fontSize:"0.875rem"},children:[e.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Тестовый доступ:"}),e.jsxs("p",{children:["Логин: ",e.jsx("strong",{children:"admin"})]}),e.jsxs("p",{children:["Пароль: ",e.jsx("strong",{children:"admin123"})]})]})]})]})})}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R=(...o)=>o.filter((r,i,s)=>!!r&&s.indexOf(r)===i).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=l.forwardRef(({color:o="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:t="",children:n,iconNode:d,...m},c)=>l.createElement("svg",{ref:c,...B,width:r,height:r,stroke:o,strokeWidth:s?Number(i)*24/Number(r):i,className:R("lucide",t),...m},[...d.map(([a,h])=>l.createElement(a,h)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=(o,r)=>{const i=l.forwardRef(({className:s,...t},n)=>l.createElement(q,{ref:n,iconNode:r,className:R(`lucide-${H(o)}`,s),...t}));return i.displayName=`${o}`,i};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=p("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=p("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=p("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=p("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=p("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=p("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=p("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=p("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=p("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=p("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=p("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=p("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function G(){const[o,r]=l.useState({documents:0,objects:0,recentActivity:0});l.useEffect(()=>{i()},[]);const i=async()=>{try{const[t,n]=await Promise.all([fetch("/api/documents"),fetch("/api/objects")]);if(t.ok&&n.ok){const d=await t.json(),m=await n.json();r({documents:d.length||0,objects:m.length||0,recentActivity:0})}}catch(t){console.error("Ошибка загрузки статистики:",t)}},s=[{icon:k,label:"Сканировать QR",path:"/scanner",color:"#2563eb"},{icon:g,label:"Объекты",path:"/objects",color:"#059669"},{icon:y,label:"Документы",path:"/documents",color:"#dc2626"},{icon:F,label:"Журнал",path:"/offline",color:"#ca8a04"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Главная"}),e.jsx("p",{style:{color:"#6b7280"},children:"Добро пожаловать в УправДок Mobile"})]}),e.jsx("div",{className:"grid grid-2 mb-4",children:s.map(t=>{const n=t.icon;return e.jsx(N,{href:t.path,children:e.jsxs("a",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem 1rem",background:"white",borderRadius:"12px",textDecoration:"none",color:t.color,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",transition:"transform 0.2s",minHeight:"120px"},onTouchStart:d=>{d.currentTarget.style.transform="scale(0.95)"},onTouchEnd:d=>{d.currentTarget.style.transform="scale(1)"},children:[e.jsx(n,{size:32,strokeWidth:2}),e.jsx("span",{style:{marginTop:"0.5rem",fontWeight:600,fontSize:"0.875rem"},children:t.label})]})},t.path)})}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"card-title",children:"Статистика"}),e.jsxs("div",{style:{display:"grid",gap:"1rem",marginTop:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Документы"}),e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:700,color:"#2563eb"},children:o.documents})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Объекты"}),e.jsx("span",{style:{fontSize:"1.25rem",fontWeight:700,color:"#059669"},children:o.objects})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"card-title",children:"О приложении"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",lineHeight:1.6},children:"УправДок Mobile - мобильное приложение для управления документацией газопроводов с поддержкой офлайн-режима и сканирования QR-кодов."}),e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f0fdf4",borderRadius:"8px"},children:e.jsx("p",{style:{fontSize:"0.875rem",color:"#166534"},children:"✅ Работает офлайн"})})]})]})}function X(){const[o,r]=l.useState([]),[i,s]=l.useState(!0),[t,n]=l.useState("");l.useEffect(()=>{d()},[]);const d=async()=>{try{const c=await fetch("/api/objects");if(c.ok){const a=await c.json();r(a)}}catch(c){console.error("Ошибка загрузки объектов:",c)}finally{s(!1)}},m=o.filter(c=>c.name.toLowerCase().includes(t.toLowerCase())||c.code.toLowerCase().includes(t.toLowerCase()));return i?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{className:"page-header",children:e.jsx("h1",{className:"page-title",children:"Объекты"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"search",placeholder:"Поиск объектов...",value:t,onChange:c=>n(c.target.value)})}),m.length===0?e.jsxs("div",{className:"card text-center",children:[e.jsx(g,{size:48,style:{margin:"0 auto",color:"#9ca3af"}}),e.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:t?"Объекты не найдены":"Нет объектов"})]}):e.jsx("div",{children:m.map(c=>e.jsxs("div",{className:"list-item",children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:c.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:c.code}),c.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(K,{size:14}),e.jsx("span",{children:c.location})]})]})]}),e.jsx($,{size:20,style:{color:"#9ca3af"}})]},c.id))})]})}function ee(){const[o,r]=l.useState([]),[i,s]=l.useState(!0),[t,n]=l.useState("");l.useEffect(()=>{d()},[]);const d=async()=>{try{const a=await fetch("/api/documents");if(a.ok){const h=await a.json();r(h)}}catch(a){console.error("Ошибка загрузки документов:",a)}finally{s(!1)}},m=async a=>{try{const x=await(await fetch(`/api/documents/${a.id}/download`)).blob(),u=window.URL.createObjectURL(x),b=document.createElement("a");b.href=u,b.download=a.fileName,b.click(),window.URL.revokeObjectURL(u)}catch(h){console.error("Ошибка скачивания:",h)}},c=o.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.fileName.toLowerCase().includes(t.toLowerCase()));return i?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{className:"page-header",children:e.jsx("h1",{className:"page-title",children:"Документы"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"search",placeholder:"Поиск документов...",value:t,onChange:a=>n(a.target.value)})}),c.length===0?e.jsxs("div",{className:"card text-center",children:[e.jsx(y,{size:48,style:{margin:"0 auto",color:"#9ca3af"}}),e.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:t?"Документы не найдены":"Нет документов"})]}):e.jsx("div",{children:c.map(a=>e.jsxs("div",{className:"list-item",onClick:()=>m(a),children:[e.jsx(y,{size:24,style:{color:"#2563eb",marginRight:"1rem"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:a.name}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[a.categoryName&&e.jsxs("span",{children:[a.categoryName," • "]}),e.jsx("span",{children:a.fileName})]})]}),e.jsx(U,{size:20,style:{color:"#9ca3af"}})]},a.id))})]})}function S(){const[o,r]=l.useState(!1),[i,s]=l.useState(""),t=()=>{r(!0),setTimeout(()=>{s("Функция QR-сканирования будет доступна при использовании камеры"),r(!1)},1e3)};return e.jsxs("div",{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"QR Сканер"}),e.jsx("p",{style:{color:"#6b7280"},children:"Сканирование QR-кодов объектов"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx(k,{size:80,style:{margin:"0 auto 1rem",color:"#2563eb"}}),!o&&!i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Наведите камеру на QR-код объекта для получения информации"}),e.jsxs("button",{onClick:t,style:{width:"100%"},children:[e.jsx(Q,{size:20,style:{marginRight:"0.5rem",display:"inline-block"}}),"Начать сканирование"]})]}),o&&e.jsxs("div",{children:[e.jsx("div",{className:"spinner",style:{margin:"2rem auto"}}),e.jsx("p",{style:{color:"#6b7280"},children:"Сканирование..."})]}),i&&e.jsxs("div",{children:[e.jsx("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"8px",marginBottom:"1rem"},children:e.jsx("p",{style:{color:"#166534",fontSize:"0.875rem"},children:i})}),e.jsx("button",{onClick:()=>{s(""),r(!1)},style:{width:"100%"},children:"Сканировать еще"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"card-title",children:"Как использовать"}),e.jsxs("ol",{style:{paddingLeft:"1.25rem",color:"#6b7280",fontSize:"0.875rem",lineHeight:1.8},children:[e.jsx("li",{children:'Нажмите кнопку "Начать сканирование"'}),e.jsx("li",{children:"Разрешите доступ к камере"}),e.jsx("li",{children:"Наведите камеру на QR-код объекта"}),e.jsx("li",{children:"Получите информацию об объекте"})]})]})]})}function te(){const o=navigator.onLine;return e.jsxs("div",{children:[e.jsx("div",{className:"page-header",children:e.jsx("h1",{className:"page-title",children:"Офлайн режим"})}),e.jsx("div",{className:"card text-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:64,style:{margin:"0 auto 1rem",color:"#10b981"}}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Подключено к сети"}),e.jsx("p",{style:{color:"#6b7280"},children:"Приложение работает в онлайн режиме"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:64,style:{margin:"0 auto 1rem",color:"#ef4444"}}),e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Нет подключения"}),e.jsx("p",{style:{color:"#6b7280"},children:"Приложение работает в офлайн режиме"})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"card-title",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(g,{size:20}),"Возможности офлайн режима"]}),e.jsxs("ul",{style:{paddingLeft:"1.25rem",color:"#6b7280",fontSize:"0.875rem",lineHeight:1.8,marginTop:"1rem"},children:[e.jsx("li",{children:"Просмотр кэшированных документов"}),e.jsx("li",{children:"Просмотр списка объектов"}),e.jsx("li",{children:"Доступ к ранее загруженным данным"}),e.jsx("li",{children:"Автоматическая синхронизация при подключении"})]})]}),e.jsx("div",{className:"card",style:{background:"#fef3c7",borderColor:"#fbbf24"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#92400e"},children:[e.jsx("strong",{children:"Примечание:"})," В офлайн режиме доступны только ранее загруженные данные. Для получения актуальной информации подключитесь к сети."]})})]})}function se({onLogout:o}){const[r]=C(),i=[{path:"/",icon:k,label:"Сканер"},{path:"/objects",icon:g,label:"Объекты"},{path:"/documents",icon:y,label:"Документы"},{path:"/home",icon:V,label:"Меню"}];return e.jsxs(e.Fragment,{children:[e.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,background:"white",borderTop:"1px solid #e5e7eb",display:"grid",gridTemplateColumns:`repeat(${i.length}, 1fr)`,padding:"0.5rem 0",zIndex:50},children:i.map(s=>{const t=r===s.path,n=s.icon;return e.jsx(N,{href:s.path,children:e.jsxs("a",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",color:t?"#2563eb":"#6b7280",textDecoration:"none",fontSize:"0.75rem",padding:"0.5rem",transition:"color 0.2s"},children:[e.jsx(n,{size:24,strokeWidth:t?2.5:2}),e.jsx("span",{style:{fontWeight:t?600:400},children:s.label})]})},s.path)})}),e.jsx("button",{onClick:o,style:{position:"fixed",top:"1rem",right:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:100,transition:"transform 0.2s, background 0.2s"},onMouseEnter:s=>{s.currentTarget.style.transform="scale(1.1)",s.currentTarget.style.background="#dc2626"},onMouseLeave:s=>{s.currentTarget.style.transform="scale(1)",s.currentTarget.style.background="#ef4444"},title:"Выход",children:e.jsx(J,{size:18})})]})}function re(){const[o,r]=l.useState(null),[i,s]=l.useState(!0),[t,n]=l.useState(navigator.onLine);l.useEffect(()=>{d();const a=()=>n(!0),h=()=>n(!1);return window.addEventListener("online",a),window.addEventListener("offline",h),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",h)}},[]);const d=async()=>{try{const a=await fetch("/api/auth/me");if(a.ok){const h=await a.json();r(h)}}catch(a){console.error("Ошибка проверки авторизации:",a)}finally{s(!1)}},m=a=>{r(a)},c=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),r(null)}catch(a){console.error("Ошибка выхода:",a)}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"spinner"})}):o?e.jsxs("div",{className:"app-container",children:[!t&&e.jsx("div",{className:"offline-banner",children:e.jsx("span",{children:"⚠️ Нет подключения к сети - работа в офлайн режиме"})}),e.jsx("main",{className:"main-content",children:e.jsxs(O,{children:[e.jsx(f,{path:"/",component:S}),e.jsx(f,{path:"/home",component:G}),e.jsx(f,{path:"/objects",component:X}),e.jsx(f,{path:"/documents",component:ee}),e.jsx(f,{path:"/scanner",component:S}),e.jsx(f,{path:"/offline",component:te}),e.jsx(f,{children:"404: Страница не найдена"})]})}),e.jsx(se,{onLogout:c})]}):e.jsx(D,{onLogin:m})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(o=>{console.log("SW зарегистрирован:",o)}).catch(o=>{console.log("SW регистрация неудачна:",o)})});v.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(re,{})}));
